---
layout: default
description: "五子棋"
header-img: "img/404-bg.jpg"
permalink: /games/gomoku.html
---

<style type='text/css'>
	canvas {
		display: block;
		margin: 10px auto;
		box-shadow: -2px -2px 2px #efefef, 5px 5px 5px #b9b9b9;
		cursor: pointer;
	}
</style>

<br>
<br>
<h3 id="message" align="center"> 五子棋 </h3>
<canvas id="chess"> </canvas>

<script>
	var gomoku = document.getElementById("chess");
	var canvasLength;														//画布长宽
	var gridNum = 15;														//棋盘格子数目
	//区分不同设备
	if (window.innerWidth < window.innerHeight) {
		canvasLength = window.innerWidth ;
		canvasLength = canvasLength - 20;
	} else {
		canvasLength = window.innerHeight;
		canvasLength = canvasLength * 0.68;
	}
	var stepLength = canvasLength / gridNum;								//每个格子的长宽
	

	gomoku.setAttribute("width", canvasLength);
	gomoku.setAttribute("height", canvasLength);
	var context = gomoku.getContext('2d');
	context.strokeStyle = '#bfbfbf';										//画笔颜色
	drawChessboard();
	drawChessman(1, 1, true);
	drawChessman(2, 1, false);
    
	//绘制棋盘
	function drawChessboard() {
		for(var i = 0; i < gridNum; i++) {
			var tmpX = stepLength / 2 + i * stepLength;
			context.moveTo(tmpX, stepLength / 2);
			context.lineTo(tmpX, stepLength / 2 +  (gridNum - 1 ) * stepLength);
			context.stroke();
			var tmpY = tmpX;
			context.moveTo(stepLength / 2, tmpY);
			context.lineTo(stepLength / 2 + (gridNum - 1) * stepLength, tmpY);
			context.stroke();
		}
	}

	//绘制棋子
	function drawChessman(chessX, chessY, whoami) {
		var chessSize = 0.8;												//棋子相比棋盘格子的大小
		context.beginPath();
		context.arc(stepLength / 2 + chessX * stepLength, stepLength / 2 + chessY * stepLength, stepLength / 2 * chessSize, 0, Math.PI * 2);
		context.closePath();

		//棋子渐变
		var radialOffset = stepLength * 0.1;
		var radial = context.createRadialGradient(stepLength / 2 + chessX * stepLength + radialOffset, stepLength / 2 + chessY * stepLength - radialOffset, stepLength / 2 * chessSize, stepLength / 2 + chessX * stepLength + radialOffset, stepLength / 2 + chessY * stepLength - radialOffset, 0);
		if (whoami) {
			radial.addColorStop(0,'#0a0a0a');
			radial.addColorStop(1,'#636766');
		} else {
			radial.addColorStop(0,'#d1d1d1');
            radial.addColorStop(1,'#f9f9f9');
		}

        context.fillStyle = radial;
		context.fill();
	}
</script>